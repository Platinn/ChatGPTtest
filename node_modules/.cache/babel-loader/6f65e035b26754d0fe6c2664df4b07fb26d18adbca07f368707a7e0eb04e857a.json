{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nexport const sendMessage = async (message, userToken) => {\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${userToken}`\n  };\n  const data = {\n    model: 'gpt-3.5-turbo-0301',\n    messages: [{\n      role: 'system',\n      content: 'You are a helpful assistant.'\n    }, {\n      role: 'user',\n      content: message\n    }],\n    max_tokens: 100,\n    n: 1,\n    temperature: 0.8\n  };\n  try {\n    const response = await axios.post(API_URL, data, {\n      headers\n    });\n    return response.data.choices[0].message.content.trim();\n  } catch (error) {\n    console.error('Error:', error);\n  }\n};\n\n// WARNING : messages can be infinite lenght -> risk on tokens and credits for user\nexport const sendMessageWithContext = async (messages, userToken) => {\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${userToken}`\n  };\n  const data = {\n    model: 'gpt-3.5-turbo-0301',\n    messages: JSON.stringify(messages),\n    max_tokens: 100,\n    n: 1,\n    temperature: 0.8\n  };\n  console.log(data);\n  try {\n    const response = await axios.post(API_URL, data, {\n      headers\n    });\n    return response.data.choices[0].message.content.trim();\n  } catch (error) {\n    console.error('Error:', error);\n  }\n};","map":{"version":3,"names":["axios","API_URL","sendMessage","message","userToken","headers","data","model","messages","role","content","max_tokens","n","temperature","response","post","choices","trim","error","console","sendMessageWithContext","JSON","stringify","log"],"sources":["/Users/plbiojout/Documents/code/naiad-gpt/chatgpttest2.1/src/ChatGPTAPI.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\n\n\nexport const sendMessage = async (message, userToken) => {\n\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${userToken}`,\n  };\n\n  const data = {\n    model: 'gpt-3.5-turbo-0301',\n    messages: [\n      {\n        role: 'system',\n        content: 'You are a helpful assistant.',\n      },\n      {\n        role: 'user',\n        content: message,\n      },\n    ],\n    max_tokens: 100,\n    n: 1,\n    temperature: 0.8,\n  };\n\n  try {\n    const response = await axios.post(API_URL, data, { headers });\n    return response.data.choices[0].message.content.trim();\n  } catch (error) {\n    console.error('Error:', error);\n  }\n};\n\n// WARNING : messages can be infinite lenght -> risk on tokens and credits for user\nexport const sendMessageWithContext = async (messages, userToken) => {\n\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${userToken}`,\n  };\n\n  const data = {\n    model: 'gpt-3.5-turbo-0301',\n    messages: JSON.stringify(messages),\n    max_tokens: 100,\n    n: 1,\n    temperature: 0.8,\n  };\n\n  console.log(data)\n\n  try {\n    const response = await axios.post(API_URL, data, { headers });\n    return response.data.choices[0].message.content.trim();\n  } catch (error) {\n    console.error('Error:', error);\n  }\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,4CAA4C;AAG5D,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAOC,OAAO,EAAEC,SAAS,KAAK;EAEvD,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,eAAe,EAAG,UAASD,SAAU;EACvC,CAAC;EAED,MAAME,IAAI,GAAG;IACXC,KAAK,EAAE,oBAAoB;IAC3BC,QAAQ,EAAE,CACR;MACEC,IAAI,EAAE,QAAQ;MACdC,OAAO,EAAE;IACX,CAAC,EACD;MACED,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEP;IACX,CAAC,CACF;IACDQ,UAAU,EAAE,GAAG;IACfC,CAAC,EAAE,CAAC;IACJC,WAAW,EAAE;EACf,CAAC;EAED,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAACd,OAAO,EAAEK,IAAI,EAAE;MAAED;IAAQ,CAAC,CAAC;IAC7D,OAAOS,QAAQ,CAACR,IAAI,CAACU,OAAO,CAAC,CAAC,CAAC,CAACb,OAAO,CAACO,OAAO,CAACO,IAAI,EAAE;EACxD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;EAChC;AACF,CAAC;;AAED;AACA,OAAO,MAAME,sBAAsB,GAAG,MAAAA,CAAOZ,QAAQ,EAAEJ,SAAS,KAAK;EAEnE,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,eAAe,EAAG,UAASD,SAAU;EACvC,CAAC;EAED,MAAME,IAAI,GAAG;IACXC,KAAK,EAAE,oBAAoB;IAC3BC,QAAQ,EAAEa,IAAI,CAACC,SAAS,CAACd,QAAQ,CAAC;IAClCG,UAAU,EAAE,GAAG;IACfC,CAAC,EAAE,CAAC;IACJC,WAAW,EAAE;EACf,CAAC;EAEDM,OAAO,CAACI,GAAG,CAACjB,IAAI,CAAC;EAEjB,IAAI;IACF,MAAMQ,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAACd,OAAO,EAAEK,IAAI,EAAE;MAAED;IAAQ,CAAC,CAAC;IAC7D,OAAOS,QAAQ,CAACR,IAAI,CAACU,OAAO,CAAC,CAAC,CAAC,CAACb,OAAO,CAACO,OAAO,CAACO,IAAI,EAAE;EACxD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;EAChC;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}